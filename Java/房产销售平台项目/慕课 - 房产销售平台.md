# 慕课 - 房产销售平台

## 项目需求分析

### 	掌握需求分析的过程

​		分析需要哪些功能

​		模型需要哪些属性

​		模型之间关联关系

​		模型通过什么样的流程实现具体功能

## 技术选型

### 	关注点

​		满足需求场景

​		分析优缺点

​		成熟度稳定性

​		活跃度

​		团队技术栈

## 集成 MyBatis

​	导入 maven 依赖（此后忽略，每个集成必要步骤）

​	加载配置文件方式

```yml
mybatis:
	config-location: classpath:/mytabis/mybatis-config.xml
```

​	配置文件

```xml
<settings>
	<!-- 配置关闭缓存 -->
    <setting name="cacheEnabled" value="false"/>
    <!-- 开启驼峰命名法 -->
    <setting name="mapUnderscoreToCamelCase" value="true"/>
   	<!-- 事物超时时间 -->
    <setting name="defaultStatementTimeout" value="600"/>
</settings>
```

## 集成 Druid 连接池

​	编写配置类

```java
@Configuration
public class DruidConfig {

    /**
    * 创建 IOC 下 dataSource Bean，注入德鲁伊连接池配置
    **/
	@ConfigurationProperties(prefix="spring.druid")	// 读取配置文件中 spring.druid 前缀配置
	@Bean(initMethod="init",destroyMethod="close")	// 方法开始时获取连接，结束时释放
	public DruidDataSource dataSource(Filter statFilter) throws SQLException{
		DruidDataSource dataSource = new DruidDataSource();
		dataSource.setProxyFilters(Lists.newArrayList(statFilter()));	// 此处为 Guava工具方法
		return dataSource;
	}
	
    /**
    * 德鲁伊过滤器设置
    **/
	@Bean
	public Filter statFilter(){
		StatFilter filter = new StatFilter();
        // 设置慢查询SQL的时间界定
		filter.setSlowSqlMillis(5000);
        // 日志记录慢查询日志
		filter.setLogSlowSql(true);
        // 合并日志
		filter.setMergeSql(true);
		return filter;
	}
	
	/**
	* 启动监控
	* 项目启动后 ip+port/druid 访问
	**/
	@Bean
	public ServletRegistrationBean servletRegistrationBean(){
		return new ServletRegistrationBean(new StatViewServlet(), "/druid/*");
	}
	
}
```

```yaml
spring:
	druid:
		driverClassName: com.mysql.jdbc.Driver
		url: jdbc:mysql://ip:port/database
		username: xx
		password: xx
		# 最大连接数
		maxActive: 30
		# 最小连接数
		minIdle: 5
		# 获取连接的最大等待时间
		maxWait: 10000
		# 解决 mysql 8小时的问题
		validationQuery: SELECT 'X'
```

## SpringBoot 起步依赖

![ZA3EvQ.png](https://s2.ax1x.com/2019/06/24/ZA3EvQ.png)

​	spring-boot-autoconfigure : 重点

![ZA3UV1.png](https://s2.ax1x.com/2019/06/24/ZA3UV1.png)

​	spring.factories 工厂配置指定了大量诸如 MybatisAutoConfiguration

![ZA3yKH.png](https://s2.ax1x.com/2019/06/24/ZA3yKH.png)

![UTOOLS1561372578251.png](https://img04.sogoucdn.com/app/a/100520146/74df50bc1b2a1a938ca83294141dfbe1)





​	